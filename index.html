<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>OtakuJatra - Repository Explorer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        body {
            background: #0D0A13;
            color: #E6E1E6;
            min-height: 100vh;
            line-height: 1.5;
            transition: background 0.3s, color 0.3s;
            touch-action: pan-y;
        }
        body.light-mode {
            background: #f5f5f7;
            color: #333;
        }
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 5%;
            background: #1A1525;
            border-bottom: 1px solid #2D263D;
            position: sticky;
            top: 0;
            z-index: 100;
            transition: background 0.3s, border-color 0.3s;
        }
        body.light-mode nav {
            background: #ffffff;
            border-bottom: 1px solid #e0e0e0;
        }
        .nav-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .nav-title {
            color: white;
            font-size: 1.2rem;
            font-weight: 600;
        }
        .nav-icon {
            color: #C4B9CD;
            font-size: 1.1rem;
            cursor: pointer;
            transition: color 0.2s;
        }
        body.light-mode .nav-icon {
            color: #666;
        }
        .nav-icon:hover {
            color: #03a9f4;
        }

        .menu-btn {
            width: 30px;
            height: 30px;
            position: relative;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .menu-btn__burger {
            width: 25px;
            height: 3px;
            background: #C4B9CD;
            border-radius: 3px;
            transition: all 0.3s ease;
        }
        body.light-mode .menu-btn__burger {
            background: #666;
        }
        .menu-btn__burger::before,
        .menu-btn__burger::after {
            content: '';
            position: absolute;
            width: 25px;
            height: 3px;
            background: #C4B9CD;
            border-radius: 3px;
            transition: all 0.3s ease;
        }
        body.light-mode .menu-btn__burger::before,
        body.light-mode .menu-btn__burger::after {
            background: #666;
        }
        .menu-btn__burger::before {
            transform: translateY(-8px);
        }
        .menu-btn__burger::after {
            transform: translateY(8px);
        }
        .menu-btn.open .menu-btn__burger {
            transform: translateX(-20px);
            background: transparent;
        }
        .menu-btn.open .menu-btn__burger::before {
            transform: rotate(45deg) translate(15px, -15px);
            background: #03a9f4;
        }
        .menu-btn.open .menu-btn__burger::after {
            transform: rotate(-45deg) translate(15px, 15px);
            background: #03a9f4;
        }

        .menu-dropdown {
            position: absolute;
            top: 70px;
            right: 5%;
            background: #1A1525;
            border: 1px solid #2D263D;
            border-radius: 8px;
            width: 200px;
            padding: 1rem;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            transform: translateY(-20px);
            z-index: 999;
        }
        body.light-mode .menu-dropdown {
            background: #ffffff;
            border: 1px solid #e0e0e0;
        }
        .menu-dropdown.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        .menu-dropdown a {
            display: block;
            color: #C4B9CD;
            padding: 0.5rem 0;
            text-decoration: none;
            transition: color 0.2s;
        }
        body.light-mode .menu-dropdown a {
            color: #666;
        }
        .menu-dropdown a:hover {
            color: #03a9f4;
        }
        .menu-dropdown hr {
            border: none;
            height: 1px;
            background: #2D263D;
            margin: 0.5rem 0;
        }
        body.light-mode .menu-dropdown hr {
            background: #e0e0e0;
        }

        .theme-options {
            margin: 0.5rem 0;
        }
        .theme-mode {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 0.5rem 0;
            cursor: pointer;
        }
        .theme-mode-icon {
            width: 20px;
            height: 20px;
            position: relative;
        }
        .sun, .moon {
            position: absolute;
            transition: opacity 0.3s, transform 0.3s;
        }
        .sun {
            color: #FFD700;
        }
        .moon {
            color: #C4B9CD;
        }
        body.light-mode .sun {
            opacity: 1;
            transform: rotate(0deg);
        }
        body.light-mode .moon {
            opacity: 0;
            transform: rotate(-90deg);
        }
        body:not(.light-mode) .sun {
            opacity: 0;
            transform: rotate(90deg);
        }
        body:not(.light-mode) .moon {
            opacity: 1;
            transform: rotate(0deg);
        }
        .theme-mode-text {
            font-size: 0.9rem;
            color: #C4B9CD;
        }
        body.light-mode .theme-mode-text {
            color: #666;
        }

        .big-center-logo {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 3rem 0;
            text-align: center;
        }
        .big-center-logo a {
            display: block;
            cursor: pointer;
            text-decoration: none;
        }
        .big-center-logo img {
            width: 210px;
            height: 210px;
            border-radius: 50%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        .big-center-logo img:hover {
            transform: scale(1.05);
        }
        .logo-text {
            color: #03a9f4;
            font-size: 2rem;
            font-weight: 600;
            margin-top: 1rem;
            text-transform: uppercase;
            transition: color 0.3s;
        }
        .intro-text {
            color: white;
            font-size: 1.1rem;
            max-width: 600px;
            margin: 1.5rem auto 0;
            padding: 0 1rem;
            line-height: 1.6;
        }
        body.light-mode .intro-text {
            color: #333;
        }

        .social-buttons {
            display: flex;
            gap: 15px;
            margin: 1.5rem 0;
            flex-wrap: wrap;
            justify-content: center;
        }

        .instagram-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 0.7rem 1.5rem;
            background: linear-gradient(45deg, #405DE6, #5851DB, #833AB4, #C13584, #E1306C, #FD1D1D);
            color: white;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .instagram-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(225, 48, 108, 0.3);
        }

        .discord-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 0.7rem 1.5rem;
            background: #5865F2;
            color: white;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .discord-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(88, 101, 242, 0.3);
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            max-width: 1200px;
            margin: 3rem auto;
            padding: 0 5%;
        }
        .feature-card {
            background: #1A1525;
            padding: 1.5rem;
            border-radius: 16px;
            border: 1px solid #2D263D;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            min-height: 250px;
            margin-bottom: 20px; /* Added margin to make cards more visible on Android */
        }
        body.light-mode .feature-card {
            background: #ffffff;
            border: 1px solid #e0e0e0;
        }
        .feature-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.3);
            border-color: #03a9f4;
        }
        .feature-icon {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: #03a9f4;
            transition: color 0.3s;
        }
        .gallery-icon {
            font-size: 2rem;
            margin-bottom: 15px;
            color: #03a9f4;
            transition: color 0.3s;
        }
        .feature-card h3 {
            font-size: 1.3rem;
            margin-bottom: 12px;
            color: #F4F0F6;
        }
        body.light-mode .feature-card h3 {
            color: #333;
        }
        .feature-card p {
            color: #A89DB5;
            line-height: 1.6;
            font-size: 0.95rem;
        }
        body.light-mode .feature-card p {
            color: #666;
        }
        .clickable-card {
            position: relative;
            display: block;
            text-decoration: none;
            cursor: pointer;
        }
        .clickable-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 16px;
            transition: all 0.3s ease;
        }
        .clickable-card:hover::after {
            box-shadow: inset 0 0 0 2px #03a9f4;
        }
        
        .profile-panel {
            position: fixed;
            top: 0;
            right: -100%;
            width: 100%;
            max-width: 400px;
            height: 100vh;
            background: #1A1525;
            border-left: 1px solid #2D263D;
            padding: 2rem;
            transition: right 0.3s ease;
            z-index: 1000;
            overflow-y: auto;
        }
        body.light-mode .profile-panel {
            background: #ffffff;
            border-left: 1px solid #e0e0e0;
        }
        @media (max-width: 500px) {
            .profile-panel {
                width: 90%;
                padding: 1.5rem;
            }
        }
        .profile-panel.active {
            right: 0;
        }
        .profile-panel h2 {
            color: #03a9f4;
            margin-bottom: 1.5rem;
            text-align: center;
            font-size: 1.5rem;
            transition: color 0.3s;
        }
        .profile-card {
            background: #2D263D;
            border-radius: 12px;
            padding: 1.2rem;
            margin-bottom: 1.2rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            transition: all 0.3s;
            border: 1px solid transparent;
            cursor: pointer;
        }
        body.light-mode .profile-card {
            background: #f5f5f7;
        }
        .profile-card:hover {
            border-color: #03a9f4;
            transform: translateY(-3px);
        }
        .profile-card:active {
            transform: scale(0.98);
        }
        .profile-card img {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #03a9f4;
            transition: border-color 0.3s;
        }
        .profile-info {
            flex: 1;
        }
        .profile-info h3 {
            color: #F4F0F6;
            margin-bottom: 0.3rem;
            font-size: 1.1rem;
        }
        body.light-mode .profile-info h3 {
            color: #333;
        }
        .profile-info span {
            color: #A89DB5;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
        }
        body.light-mode .profile-info span {
            color: #666;
        }
        .profile-info i {
            color: #03a9f4;
            font-size: 1rem;
            transition: color 0.3s;
        }
        .close-panel {
            position: absolute;
            top: 1rem;
            right: 1rem;
            color: #C4B9CD;
            font-size: 1.8rem;
            cursor: pointer;
            transition: color 0.2s;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        body.light-mode .close-panel {
            color: #666;
        }
        .close-panel:hover {
            color: #03a9f4;
            background: rgba(3, 169, 244, 0.1);
        }
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        .overlay.active {
            opacity: 1;
            visibility: visible;
        }
        footer {
            text-align: center;
            padding: 30px 5%;
            background: #1A1525;
            border-top: 1px solid #2D263D;
            margin-top: auto;
        }
        body.light-mode footer {
            background: #ffffff;
            border-top: 1px solid #e0e0e0;
        }
        footer p {
            color: #6B5B7D;
            font-size: 0.9rem;
        }
        body.light-mode footer p {
            color: #999;
        }
        
        .gallery-panel {
            position: fixed;
            top: 0;
            right: -100%;
            width: 100%;
            max-width: 500px;
            height: 100vh;
            background: #1A1525;
            border-left: 1px solid #2D263D;
            padding: 2rem;
            transition: right 0.3s ease;
            z-index: 1000;
            overflow-y: auto;
        }
        body.light-mode .gallery-panel {
            background: #ffffff;
            border-left: 1px solid #e0e0e0;
        }
        .gallery-panel.active {
            right: 0;
        }
        .gallery-panel h2 {
            color: #03a9f4;
            margin-bottom: 1.5rem;
            text-align: center;
            font-size: 1.5rem;
        }
        .album-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        .album-card {
            background: #2D263D;
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid transparent;
            position: relative;
            margin-bottom: 20px; /* Added margin to make cards more visible on Android */
        }
        body.light-mode .album-card {
            background: #f5f5f7;
        }
        .album-card:hover {
            border-color: #03a9f4;
            transform: translateY(-3px);
        }
        .album-icon {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            color: #03a9f4;
        }
        .album-title {
            font-size: 0.9rem;
            color: #F4F0F6;
            margin-bottom: 0.25rem;
        }
        body.light-mode .album-title {
            color: #333;
        }
        .album-count {
            font-size: 0.8rem;
            color: #A89DB5;
        }
        body.light-mode .album-count {
            color: #666;
        }

        .album-content-panel {
            position: fixed;
            top: 0;
            right: -100%;
            width: 100%;
            max-width: 500px;
            height: 100vh;
            background: #1A1525;
            border-left: 1px solid #2D263D;
            padding: 2rem;
            transition: right 0.3s ease;
            z-index: 1001;
            overflow-y: auto;
        }
        body.light-mode .album-content-panel {
            background: #ffffff;
            border-left: 1px solid #e0e0e0;
        }
        .album-content-panel.active {
            right: 0;
        }
        .album-content-panel h2 {
            color: #03a9f4;
            margin-bottom: 1.5rem;
            text-align: center;
            font-size: 1.5rem;
        }
        
        /* Grid toggle button styles */
        .grid-toggle-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1002;
            display: none;
        }
        
        .grid-toggle-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #03a9f4;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(3, 169, 244, 0.3);
            transition: all 0.3s ease;
            position: relative;
            border: none;
            outline: none;
        }
        
        .grid-toggle-btn:hover {
            transform: scale(1.1);
        }
        
        .grid-toggle-btn.active {
            background: #1A1525;
            border: 2px solid #03a9f4;
        }
        
        .grid-options {
            position: absolute;
            bottom: 60px;
            right: 0;
            background: #1A1525;
            border-radius: 8px;
            padding: 0.5rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            display: none;
            flex-direction: column;
            gap: 0.5rem;
            border: 1px solid #2D263D;
        }
        
        .grid-option {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #2D263D;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .grid-option:hover {
            background: #03a9f4;
        }
        
        .grid-option.active {
            background: #03a9f4;
        }
        
        .photo-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .photo-grid.grid-4 {
            grid-template-columns: repeat(4, 1fr);
        }
        
        .photo-item {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            aspect-ratio: 1;
            background: #2D263D;
        }
        body.light-mode .photo-item {
            background: #f5f5f7;
        }
        .photo-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s;
            cursor: pointer;
        }
        .photo-item:hover img {
            transform: scale(1.05);
        }
        .no-photos {
            grid-column: 1 / -1;
            text-align: center;
            color: #A89DB5;
            padding: 2rem;
        }
        body.light-mode .no-photos {
            color: #666;
        }
        
        .back-to-albums {
            display: flex;
            align-items: center;
            gap: 5px;
            color: #03a9f4;
            cursor: pointer;
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }
        .back-to-albums:hover {
            text-decoration: underline;
        }
        
        /* Image viewer styles */
        .image-viewer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1100;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            touch-action: none;
        }
        
        .image-viewer.active {
            opacity: 1;
            visibility: visible;
        }
        
        .image-container {
            position: relative;
            max-width: 90%;
            max-height: 80%;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            touch-action: none;
        }
        
        .image-container img {
            max-width: 100%;
            max-height: 80vh;
            object-fit: contain;
            transition: transform 0.3s ease;
            touch-action: none;
            transform-origin: 0 0;
        }
        
        .image-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            z-index: 1;
            transition: all 0.3s ease;
            border: none;
        }
        
        .image-nav:hover {
            background: rgba(3, 169, 244, 0.7);
        }
        
        .image-nav.prev {
            left: 20px;
        }
        
        .image-nav.next {
            right: 20px;
        }
        
        .image-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            z-index: 1;
            transition: all 0.3s ease;
            border: none;
        }
        
        .image-close:hover {
            background: rgba(255, 0, 0, 0.7);
        }
        
        .image-index {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            font-size: 1rem;
            background: rgba(0, 0, 0, 0.5);
            padding: 5px 10px;
            border-radius: 20px;
        }
        
        /* Download popup */
        .download-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #1A1525;
            padding: 1rem;
            border-radius: 8px;
            z-index: 1200;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            border: 1px solid #2D263D;
            display: none;
        }
        
        .download-popup.active {
            display: block;
        }
        
        .download-option {
            padding: 0.5rem 1rem;
            cursor: pointer;
            border-radius: 4px;
            transition: background 0.2s;
        }
        
        .download-option:hover {
            background: #03a9f4;
        }

        /* Trusted Store Panel */
        .trusted-store-panel {
            position: fixed;
            top: 0;
            right: -100%;
            width: 100%;
            max-width: 400px;
            height: 100vh;
            background: #1A1525;
            border-left: 1px solid #2D263D;
            padding: 2rem;
            transition: right 0.3s ease;
            z-index: 1000;
            overflow-y: auto;
        }
        body.light-mode .trusted-store-panel {
            background: #ffffff;
            border-left: 1px solid #e0e0e0;
        }
        .trusted-store-panel.active {
            right: 0;
        }
        .trusted-store-panel h2 {
            color: #03a9f4;
            margin-bottom: 1.5rem;
            text-align: center;
            font-size: 1.5rem;
        }
    </style>
</head>
<body>
    <nav>
        <div class="nav-left">
            <div class="nav-title">OtakuJatra</div>
        </div>
        
        <div class="menu-btn" id="menuBtn">
            <div class="menu-btn__burger"></div>
        </div>
        
        <div class="menu-dropdown" id="menuDropdown">
            <a href="#">Guide</a>
            <hr>
            <div class="theme-options">
                <div class="theme-mode" id="themeMode">
                    <div class="theme-mode-icon">
                        <i class="fas fa-sun sun"></i>
                        <i class="fas fa-moon moon"></i>
                    </div>
                    <span class="theme-mode-text">Dark Mode</span>
                </div>
            </div>
        </div>
    </nav>

    <div class="big-center-logo">
        <a href="https://youtu.be/RLw1-xyTvTY" target="_blank">
            <img src="https://scontent.cdninstagram.com/v/t51.2885-19/488123249_644089784895348_3185349810036270309_n.jpg?stp=dst-jpg_s160x160_tt6&_nc_cat=103&ccb=1-7&_nc_sid=bf7eb4&_nc_ohc=qI77xRYBI10Q7kNvwEqXgCN&_nc_oc=AdmTHFDOHXf4WCIAwZePu5VaBmJjT41o3X9H2SnkOs7gQThUDORbZy2ebAuwVUbuUss&_nc_zt=24&_nc_ht=scontent.cdninstagram.com&oh=00_AYGoD7MlsHOp6NvB35zqcLe556xsRTmMfSKDUaY_VPuvfQ&oe=67F5B998" alt="Clickable Logo">
            <div class="logo-text">OtakuJatra</div>
        </a>
        <div class="intro-text">
            "Nepal's Biggest Pop-Culture Convention
By the Fans, For the Fans!!"
        </div>
        <div class="social-buttons">
            <a href="https://www.instagram.com/otakujatra?igsh=MWl6bzZvM3Q3aWl1bg==" target="_blank" class="instagram-btn">
                <i class="fab fa-instagram"></i> Follow
            </a>
            <a href="https://discord.gg/weRKEBMU" target="_blank" class="discord-btn">
                <i class="fab fa-discord"></i> Join Server
            </a>
        </div>
    </div>

    <div class="features">
        <div class="feature-card clickable-card" id="galleryCard">
            <i class="fas fa-images gallery-icon"></i>
            <h3>Gallery</h3>
            <p>Browse through our collection of photos from past OtakuJatra events and gatherings.</p>
        </div>
        <div class="feature-card clickable-card" id="trustedStoreCard">
            <i class="fas fa-store feature-icon"></i> <!-- Changed from fa-images to fa-store -->
            <h3>Trusted Store</h3>
            <p>Find trusted stores to buy your Cosplay and to buy other otakus stuff</p>
        </div>
        <div class="feature-card clickable-card" id="friendsCard">
            <i class="fas fa-users feature-icon"></i>
            <h3>Contributor</h3>
            <p>OtakuJatra very own unpaid labour</p>
        </div>
    </div>

    <div class="overlay" id="overlay"></div>
    <div class="profile-panel" id="profilePanel">
        <div class="close-panel" id="closePanel">&times;</div>
        <h2>Contributor</h2>
        
        <div class="profile-card" onclick="window.open('https://www.instagram.com/asatosaizen?igsh=eHN6eXl6YnJrMW43')">
            <img src="https://avatars.githubusercontent.com/u/193106854?u=af480dbba8bdb36ae5305b6826df8910eebe0bf6&v=4" alt="Asato Saizen">
            <div class="profile-info">
                <h3>Website Maintainer</h3>
                <span><i class="fab fa-instagram"></i> asatosaizen</span>
            </div>
        </div>
    </div>

    <!-- Trusted Store Panel -->
    <div class="trusted-store-panel" id="trustedStorePanel">
        <div class="close-panel" id="closeTrustedStorePanel">&times;</div>
        <h2>Trusted Stores</h2>
        
       <footer>
  <p>© Note you can rent coses from the other untitled store as well dm them on their social handle</p>
</footer>

<div class="profile-card" onclick="window.open('https://www.instagram.com/saizenpropestore?igsh=MWVocXI0NmJqNXJqYw==')">
  <img src="https://scontent.cdninstagram.com/v/t51.2885-19/472323067_2873087249526739_7941777930705268963_n.jpg?stp=dst-jpg_s160x160_tt6&_nc_cat=106&ccb=1-7&_nc_sid=bf7eb4&_nc_ohc=MajqvevX7F8Q7kNvgFaHTJB&_nc_oc=AdkPYRQCGNaUIbdzm90fV6l7Eoxlr7AvuIMP3UuzZS0AAu4UIlQDcYzYHKo60LNcH_x4quK1-lwmvqcvqI6mZf9w&_nc_zt=24&_nc_ht=scontent.cdninstagram.com&oh=00_AYHas07BAxoyy85A6iKqY51uNX9Xz_YB0_cVvqnQJbM_Jg&oe=67F0503E" alt="saizenpropestore">
  <div class="profile-info">
    <h3>Pre order props</h3>
    <span><i class="fab fa-instagram"></i> saizenpropestore</span>
  </div>
</div>
<div class="profile-card" onclick="window.open('https://www.instagram.com/_cosplay_mania?igsh=MXF2ZGoxbmVtdWM3YQ==')">
  <img src="https://scontent.cdninstagram.com/v/t51.2885-19/289540198_133350972664476_3910646222464333620_n.jpg?stp=dst-jpg_s160x160_tt6&_nc_cat=103&ccb=1-7&_nc_sid=bf7eb4&_nc_ohc=-QJVx34yJLAQ7kNvgESl6a5&_nc_oc=AdnIXTa03WJvC6JaJ92_impBp5xJ-oG2LR8ymY3JQ2C28y4Fhgpk3_FUOfRlOEwj7Gk&_nc_zt=24&_nc_ht=scontent.cdninstagram.com&oh=00_AYGO1fzdQqbs1ytQ97Qy9jAyTOAOV7GbI-BOMj9GI3iNMg&oe=67F3A82D" alt="saizenpropestore">
  <div class="profile-info">
    <h3>Cosplay store</h3>
    <span><i class="fab fa-instagram"></i> _cosplay_mania</span>
  </div>
</div>
<div class="profile-card" onclick="window.open('https://www.instagram.com/collectella?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==')">
  <img src="https://scontent.cdninstagram.com/v/t51.2885-19/350626251_667935218503322_8882953237136911705_n.jpg?stp=dst-jpg_s160x160_tt6&_nc_cat=107&ccb=1-7&_nc_sid=bf7eb4&_nc_ohc=4A9fAzVOC9kQ7kNvgH8TWd3&_nc_oc=AdkFkYDQl2_CXNHt2pI_dhshKY2D1WByz-Z5XgEGi973mbO-VJHqt2puOj0AldJUs60&_nc_zt=24&_nc_ht=scontent.cdninstagram.com&oh=00_AYEHnZH8o7JhZ6C5iBMsAgIf3nle9g3KVi5mOytl9F9Tag&oe=67F3CC47" alt="saizenpropestore">
  <div class="profile-info">
    <h3>Cosplay store</h3>
    <span><i class="fab fa-instagram"></i> collectella</span>
  </div>
</div>
<div class="profile-card" onclick="window.open('https://www.instagram.com/nep.cosrent?igsh=MTlnbDliNmU4YWdsNg==')">
  <img src="https://scontent.cdninstagram.com/v/t51.2885-19/456202631_298379210000405_6737728710563318306_n.jpg?stp=dst-jpg_s160x160_tt6&_nc_cat=105&ccb=1-7&_nc_sid=bf7eb4&_nc_aid=0&_nc_ohc=6yU4OsNWfr0Q7kNvgGR9DBG&_nc_oc=AdmBZkge0zUQ_rDbVfTj9r5ENVp7VUmLNAUGFEC5NW871BrR-ciy4HAG7A8WVlyRja8&_nc_zt=24&_nc_ht=scontent.cdninstagram.com&oh=00_AYFHUv8v_7qxqTponRbI4ySNS9qEAUya8Z5Y87YRRQ2ptQ&oe=67F3D0CD" alt="saizenpropestore">
  <div class="profile-info">
    <h3>Cos rental store</h3>
    <span><i class="fab fa-instagram"></i> nep.cosrent</span>
  </div>
</div>
</div>

    <div class="gallery-panel" id="galleryPanel">
        <div class="close-panel" id="closeGalleryPanel">&times;</div>
        <h2>Gallery</h2>
        
        <div class="album-grid" id="albumGrid">
            <!-- Albums will be added here dynamically -->
        </div>
    </div>

    <div class="album-content-panel" id="albumContentPanel">
        <div class="close-panel" id="closeAlbumContentPanel">&times;</div>
        <h2 id="albumContentTitle">Album</h2>
        <div class="back-to-albums" id="backToAlbums">
            <i class="fas fa-arrow-left"></i> Back to Albums
        </div>
        <div class="photo-grid" id="photoGrid">
            <!-- Photos will be added here dynamically -->
        </div>
    </div>
    
    <!-- Grid toggle button (only visible in album view) -->
    <div class="grid-toggle-container" id="gridToggleContainer">
        <button class="grid-toggle-btn" id="gridToggleBtn">
            <i class="fas fa-th"></i>
        </button>
        <div class="grid-options" id="gridOptions">
            <div class="grid-option active" data-columns="2">
                <i class="fas fa-th"></i>
            </div>
            <div class="grid-option" data-columns="4">
                <i class="fas fa-th-large"></i>
            </div>
        </div>
    </div>
    
    <!-- Image viewer -->
    <div class="image-viewer" id="imageViewer">
        <div class="image-index" id="imageIndex">1/10</div>
        <button class="image-close" id="imageClose">
            <i class="fas fa-times"></i>
        </button>
        <div class="image-container" id="imageContainer">
            <button class="image-nav prev" id="imagePrev">
                <i class="fas fa-chevron-left"></i>
            </button>
            <img id="viewedImage" src="" alt="">
            <button class="image-nav next" id="imageNext">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
    </div>
    
    <!-- Download popup -->
    <div class="download-popup" id="downloadPopup">
        <div class="download-option" id="downloadCurrent">Download this image</div>
    </div>

    <footer>
        <p> Made with ❤️ by Asato Saizen</p>
    </footer>

    <script>
        // ImageKit configuration
        const imageKit = {
            urlEndpoint: 'https://ik.imagekit.io/asatosaizen',
            privateKey: 'private_5vBD4u7CiX6+y87crPyz8J5Zei4=',
            publicKey: 'public_5vBD4u7CiX6+y87crPyz8J5Zei4='
        };

        // Current state variables
        let currentAlbumFiles = [];
        let currentImageIndex = 0;
        
        // Pinch zoom variables
        let initialDistance = null;
        let lastScale = 1;
        let posX = 0;
        let posY = 0;
        let scale = 1;
        let isDragging = false;
        let startX, startY;
        
        // DOM elements
        const gridToggleContainer = document.getElementById('gridToggleContainer');
        const gridToggleBtn = document.getElementById('gridToggleBtn');
        const gridOptions = document.getElementById('gridOptions');
        const photoGrid = document.getElementById('photoGrid');
        const imageViewer = document.getElementById('imageViewer');
        const viewedImage = document.getElementById('viewedImage');
        const imagePrev = document.getElementById('imagePrev');
        const imageNext = document.getElementById('imageNext');
        const imageClose = document.getElementById('imageClose');
        const imageIndex = document.getElementById('imageIndex');
        const downloadPopup = document.getElementById('downloadPopup');
        const downloadCurrent = document.getElementById('downloadCurrent');

        // Function to fetch ALL files from ImageKit with pagination
        async function fetchAllImageKitFiles() {
            try {
                let allFiles = [];
                let skip = 0;
                const limit = 1000;
                let hasMore = true;

                while (hasMore) {
                    const response = await fetch(`https://api.imagekit.io/v1/files?limit=${limit}&skip=${skip}`, {
                        method: 'GET',
                        headers: {
                            'Authorization': `Basic ${btoa(`${imageKit.privateKey}:`)}`,
                            'Content-Type': 'application/json'
                        }
                    });
                    
                    if (!response.ok) {
                        throw new Error(`Failed to fetch files: ${response.status} ${response.statusText}`);
                    }
                    
                    const data = await response.json();
                    allFiles = [...allFiles, ...data];
                    
                    if (data.length < limit) {
                        hasMore = false;
                    } else {
                        skip += limit;
                    }
                }
                
                console.log('Raw files data:', allFiles);
                return allFiles;
            } catch (error) {
                console.error('Error fetching files:', error);
                return [];
            }
        }

        // Function to organize files by folders
        function organizeFilesByFolders(files) {
            const folders = new Map();
            
            files.forEach(file => {
                if (file.filePath) {
                    // Handle both forward and backward slashes in paths
                    const pathParts = file.filePath.split(/[\\/]/).filter(part => part.trim() !== '');
                    
                    if (pathParts.length >= 1) {
                        const folderName = pathParts.length > 1 ? pathParts[0] : 'Main Album';
                        
                        if (!folders.has(folderName)) {
                            folders.set(folderName, []);
                        }
                        folders.get(folderName).push(file);
                    }
                }
            });
            
            console.log('Organized folders:', Array.from(folders.keys()));
            return folders;
        }

        // Function to render albums in the gallery
        async function renderAlbums() {
            const albumGrid = document.getElementById('albumGrid');
            albumGrid.innerHTML = '<div class="no-photos">Loading albums...</div>';
            
            try {
                const allFiles = await fetchAllImageKitFiles();
                console.log('Total files count:', allFiles.length);
                
                const folders = organizeFilesByFolders(allFiles);
                
                if (folders.size === 0) {
                    albumGrid.innerHTML = '<div class="no-photos">No albums found in ImageKit library</div>';
                    return;
                }
                
                albumGrid.innerHTML = '';
                
                folders.forEach((files, folderName) => {
                    const albumCard = document.createElement('div');
                    albumCard.className = 'album-card';
                    albumCard.innerHTML = `
                        <i class="fas fa-images album-icon"></i> <!-- Changed from fa-folder to fa-images -->
                        <div class="album-title">${folderName}</div>
                        <div class="album-count">${files.length} items</div>
                    `;

                    albumCard.addEventListener('click', async () => {
                        currentAlbumFiles = files.sort((a, b) => a.name.localeCompare(b.name));
                        await renderAlbumPhotos(currentAlbumFiles, folderName);
                    });
                    
                    albumGrid.appendChild(albumCard);
                });
            } catch (error) {
                console.error('Render error:', error);
                albumGrid.innerHTML = '<div class="no-photos">Error loading content</div>';
            }
        }
        
        // Function to render photos in an album
        async function renderAlbumPhotos(files, folderName) {
            const photoGrid = document.getElementById('photoGrid');
            photoGrid.innerHTML = '<div class="no-photos">Loading photos...</div>';
            
            document.getElementById('albumContentTitle').textContent = folderName;
            document.getElementById('albumContentPanel').classList.add('active');
            document.getElementById('overlay').classList.add('active');
            
            // Show grid toggle button
            gridToggleContainer.style.display = 'block';
            
            photoGrid.innerHTML = '';
            
            files.forEach((file, index) => {
                // Properly construct the URL without double slashes
                let imgPath = file.filePath;
                if (imgPath.startsWith('/')) {
                    imgPath = imgPath.substring(1);
                }
                
                // Add cache-busting parameter
                const timestamp = new Date().getTime();
                const imgUrl = `${imageKit.urlEndpoint}/${imgPath}?${timestamp}`;
                
                const photoItem = document.createElement('div');
                photoItem.className = 'photo-item';
                photoItem.innerHTML = `
                    <img src="${imgUrl}" alt="${file.name || file.filePath}" loading="lazy" data-index="${index}">
                `;
                photoGrid.appendChild(photoItem);
                
                // Add click event to open image viewer
                const imgElement = photoItem.querySelector('img');
                imgElement.addEventListener('click', () => {
                    openImageViewer(index);
                });
                
                // Add long press/right click event for download
                let pressTimer;
                
                imgElement.addEventListener('mousedown', (e) => {
                    if (e.button === 2) { // Right click
                        e.preventDefault();
                        showDownloadPopup(index, e);
                    } else { // Left click
                        pressTimer = setTimeout(() => {
                            showDownloadPopup(index, e);
                        }, 1000);
                    }
                });
                
                imgElement.addEventListener('mouseup', () => {
                    clearTimeout(pressTimer);
                });
                
                imgElement.addEventListener('mouseleave', () => {
                    clearTimeout(pressTimer);
                });
                
                imgElement.addEventListener('contextmenu', (e) => {
                    e.preventDefault();
                });
                
                // Touch events for mobile
                imgElement.addEventListener('touchstart', (e) => {
                    pressTimer = setTimeout(() => {
                        showDownloadPopup(index, e);
                    }, 1000);
                });
                
                imgElement.addEventListener('touchend', () => {
                    clearTimeout(pressTimer);
                });
            });
        }
        
        // Function to open image viewer
        function openImageViewer(index) {
            currentImageIndex = index;
            resetImageTransform();
            updateImageViewer();
            imageViewer.classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        
        // Function to reset image transform
        function resetImageTransform() {
            scale = 1;
            posX = 0;
            posY = 0;
            updateImageTransform();
        }
        
        // Function to update image transform
        function updateImageTransform() {
            viewedImage.style.transform = `translate(${posX}px, ${posY}px) scale(${scale})`;
        }
        
        // Function to update image viewer with current image
        function updateImageViewer() {
            const file = currentAlbumFiles[currentImageIndex];
            let imgPath = file.filePath;
            if (imgPath.startsWith('/')) {
                imgPath = imgPath.substring(1);
            }
            const imgUrl = `${imageKit.urlEndpoint}/${imgPath}`;
            
            viewedImage.src = imgUrl;
            imageIndex.textContent = `${currentImageIndex + 1}/${currentAlbumFiles.length}`;
        }
        
        // Function to show download popup
        function showDownloadPopup(index, event) {
            currentImageIndex = index;
            
            // Position the popup near the click/touch
            const x = event.clientX || event.touches[0].clientX;
            const y = event.clientY || event.touches[0].clientY;
            
            downloadPopup.style.left = `${x}px`;
            downloadPopup.style.top = `${y}px`;
            downloadPopup.classList.add('active');
            
            // Close popup when clicking elsewhere
            const closePopup = (e) => {
                if (!downloadPopup.contains(e.target)) {
                    downloadPopup.classList.remove('active');
                    document.removeEventListener('click', closePopup);
                    document.removeEventListener('touchstart', closePopup);
                }
            };
            
            setTimeout(() => {
                document.addEventListener('click', closePopup);
                document.addEventListener('touchstart', closePopup);
            }, 10);
        }

        // Menu Toggle Functionality
        const menuBtn = document.getElementById('menuBtn');
        const menuDropdown = document.getElementById('menuDropdown');
        
        menuBtn.addEventListener('click', () => {
            menuBtn.classList.toggle('open');
            menuDropdown.classList.toggle('active');
        });
        
        document.addEventListener('click', (e) => {
            if (!menuBtn.contains(e.target) && !menuDropdown.contains(e.target)) {
                menuBtn.classList.remove('open');
                menuDropdown.classList.remove('active');
            }
        });

        // Profile Panel Functionality
        const friendsCard = document.getElementById('friendsCard');
        const profilePanel = document.getElementById('profilePanel');
        const closePanel = document.getElementById('closePanel');
        const overlay = document.getElementById('overlay');
        
        friendsCard.addEventListener('click', () => {
            profilePanel.classList.add('active');
            overlay.classList.add('active');
        });
        
        closePanel.addEventListener('click', () => {
            profilePanel.classList.remove('active');
            overlay.classList.remove('active');
        });
        
        overlay.addEventListener('click', () => {
            profilePanel.classList.remove('active');
            overlay.classList.remove('active');
        });
        
        // Trusted Store Panel Functionality
        const trustedStoreCard = document.getElementById('trustedStoreCard');
        const trustedStorePanel = document.getElementById('trustedStorePanel');
        const closeTrustedStorePanel = document.getElementById('closeTrustedStorePanel');
        
        trustedStoreCard.addEventListener('click', () => {
            trustedStorePanel.classList.add('active');
            overlay.classList.add('active');
        });
        
        closeTrustedStorePanel.addEventListener('click', () => {
            trustedStorePanel.classList.remove('active');
            overlay.classList.remove('active');
        });
        
        // Gallery Panel Functionality
        const galleryCard = document.getElementById('galleryCard');
        const galleryPanel = document.getElementById('galleryPanel');
        const closeGalleryPanel = document.getElementById('closeGalleryPanel');
        
        galleryCard.addEventListener('click', async () => {
            galleryPanel.classList.add('active');
            overlay.classList.add('active');
            await renderAlbums();
        });
        
        closeGalleryPanel.addEventListener('click', () => {
            galleryPanel.classList.remove('active');
            overlay.classList.remove('active');
        });

        // Album Content Panel Functionality
        const albumContentPanel = document.getElementById('albumContentPanel');
        const closeAlbumContentPanel = document.getElementById('closeAlbumContentPanel');
        const backToAlbums = document.getElementById('backToAlbums');
        
        backToAlbums.addEventListener('click', () => {
            albumContentPanel.classList.remove('active');
            gridToggleContainer.style.display = 'none';
        });
        
        closeAlbumContentPanel.addEventListener('click', () => {
            albumContentPanel.classList.remove('active');
            overlay.classList.remove('active');
            gridToggleContainer.style.display = 'none';
        });
        
        overlay.addEventListener('click', () => {
            if (profilePanel.classList.contains('active')) {
                profilePanel.classList.remove('active');
            }
            if (trustedStorePanel.classList.contains('active')) {
                trustedStorePanel.classList.remove('active');
            }
            if (galleryPanel.classList.contains('active')) {
                galleryPanel.classList.remove('active');
            }
            if (albumContentPanel.classList.contains('active')) {
                albumContentPanel.classList.remove('active');
                gridToggleContainer.style.display = 'none';
            }
            overlay.classList.remove('active');
        });

        // Theme Mode Toggle
        const themeMode = document.getElementById('themeMode');
        const themeModeText = document.querySelector('.theme-mode-text');
        
        themeMode.addEventListener('click', () => {
            document.body.classList.toggle('light-mode');
            
            if (document.body.classList.contains('light-mode')) {
                themeModeText.textContent = 'Light Mode';
            } else {
                themeModeText.textContent = 'Dark Mode';
            }
            
            localStorage.setItem('themeMode', document.body.classList.contains('light-mode') ? 'light' : 'dark');
        });

        if (localStorage.getItem('themeMode') === 'light') {
            document.body.classList.add('light-mode');
            themeModeText.textContent = 'Light Mode';
        }

        // Grid toggle functionality
        gridToggleBtn.addEventListener('click', () => {
            gridOptions.style.display = gridOptions.style.display === 'flex' ? 'none' : 'flex';
        });
        
        document.querySelectorAll('.grid-option').forEach(option => {
            option.addEventListener('click', () => {
                const columns = option.dataset.columns;
                
                // Update active state
                document.querySelectorAll('.grid-option').forEach(opt => {
                    opt.classList.remove('active');
                });
                option.classList.add('active');
                
                // Update grid
                photoGrid.className = 'photo-grid';
                if (columns === '4') {
                    photoGrid.classList.add('grid-4');
                }
                
                // Close options
                gridOptions.style.display = 'none';
            });
        });
        
        // Image viewer functionality
        imagePrev.addEventListener('click', () => {
            currentImageIndex = (currentImageIndex - 1 + currentAlbumFiles.length) % currentAlbumFiles.length;
            resetImageTransform();
            updateImageViewer();
        });
        
        imageNext.addEventListener('click', () => {
            currentImageIndex = (currentImageIndex + 1) % currentAlbumFiles.length;
            resetImageTransform();
            updateImageViewer();
        });
        
        imageClose.addEventListener('click', () => {
            imageViewer.classList.remove('active');
            document.body.style.overflow = '';
            resetImageTransform();
        });
        
        // Keyboard navigation in image viewer
        document.addEventListener('keydown', (e) => {
            if (imageViewer.classList.contains('active')) {
                if (e.key === 'ArrowLeft') {
                    currentImageIndex = (currentImageIndex - 1 + currentAlbumFiles.length) % currentAlbumFiles.length;
                    resetImageTransform();
                    updateImageViewer();
                } else if (e.key === 'ArrowRight') {
                    currentImageIndex = (currentImageIndex + 1) % currentAlbumFiles.length;
                    resetImageTransform();
                    updateImageViewer();
                } else if (e.key === 'Escape') {
                    imageViewer.classList.remove('active');
                    document.body.style.overflow = '';
                    resetImageTransform();
                }
            }
        });
        
        // Pinch zoom functionality
        viewedImage.addEventListener('touchstart', (e) => {
            if (e.touches.length === 2) {
                e.preventDefault();
                initialDistance = getDistance(e.touches[0], e.touches[1]);
            } else if (e.touches.length === 1) {
                isDragging = true;
                startX = e.touches[0].clientX - posX;
                startY = e.touches[0].clientY - posY;
            }
        }, { passive: false });
        
        viewedImage.addEventListener('touchmove', (e) => {
            if (e.touches.length === 2) {
                e.preventDefault();
                const currentDistance = getDistance(e.touches[0], e.touches[1]);
                if (initialDistance !== null) {
                    const newScale = Math.max(1, Math.min(3, scale * (currentDistance / initialDistance)));
                    scale = newScale;
                    updateImageTransform();
                }
                initialDistance = currentDistance;
            } else if (e.touches.length === 1 && isDragging) {
                e.preventDefault();
                posX = e.touches[0].clientX - startX;
                posY = e.touches[0].clientY - startY;
                updateImageTransform();
            }
        }, { passive: false });
        
        viewedImage.addEventListener('touchend', (e) => {
            initialDistance = null;
            isDragging = false;
        });
        
        // Mouse drag functionality
        viewedImage.addEventListener('mousedown', (e) => {
            if (scale > 1) {
                e.preventDefault();
                isDragging = true;
                startX = e.clientX - posX;
                startY = e.clientY - startY;
                viewedImage.style.cursor = 'grabbing';
            }
        });
        
        viewedImage.addEventListener('mousemove', (e) => {
            if (isDragging && scale > 1) {
                e.preventDefault();
                posX = e.clientX - startX;
                posY = e.clientY - startY;
                updateImageTransform();
            }
        });
        
        viewedImage.addEventListener('mouseup', () => {
            isDragging = false;
            viewedImage.style.cursor = 'grab';
        });
        
        viewedImage.addEventListener('mouseleave', () => {
            isDragging = false;
            viewedImage.style.cursor = 'grab';
        });
        
        // Helper function to calculate distance between two touch points
        function getDistance(touch1, touch2) {
            return Math.hypot(
                touch2.clientX - touch1.clientX,
                touch2.clientY - touch1.clientY
            );
        }
        
        // Download functionality
        downloadCurrent.addEventListener('click', () => {
            const file = currentAlbumFiles[currentImageIndex];
            let imgPath = file.filePath;
            if (imgPath.startsWith('/')) {
                imgPath = imgPath.substring(1);
            }
            const imgUrl = `${imageKit.urlEndpoint}/${imgPath}`;
            
            // Create a temporary anchor element to trigger download
            const a = document.createElement('a');
            a.href = imgUrl;
            a.download = file.name || 'image';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            downloadPopup.classList.remove('active');
        });

        document.addEventListener('DOMContentLoaded', () => {
            renderAlbums();
        });
    </script>
</body>
</html>